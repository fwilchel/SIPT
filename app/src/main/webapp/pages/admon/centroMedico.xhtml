<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<ui:composition 
  xmlns="http://www.w3.org/1999/xhtml" 
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:ui="http://java.sun.com/jsf/facelets" 
  xmlns:p="http://primefaces.org/ui" 
  template="/resources/templates/default/template.left-panel.xhtml">
  <ui:define
    name="content">
    <h:panelGroup 
      id="main"
      layout="block">
      <h:form
        id="frmList"
        prependId="false"
        rendered="#{centroMedicoController.showList}">
        <p:toolbar>
          <f:facet 
            name="left">
            <h:outputText 
              value="#{bundle['title.centromedico']}"
              styleClass="toolbar-title"/>
          </f:facet>
          <f:facet 
            name="right">
            <p:commandButton 
              title="#{bundle['commons.btn.refresh']}"
              icon="ui-icon-refresh"
              actionListener="#{centroMedicoController.loadList()}"
              disabled="#{centroMedicoController.editable}"
              update="dtList"/>
            <p:commandButton 
              id="btnCreate" 
              title="#{bundle['commons.btn.new']}"
              icon="ui-icon-document"
              actionListener="#{centroMedicoController.onCreate()}"
              update=":main"/>
            <p:commandButton 
              type="button" 
              title="#{bundle['commons.btn.print']}" 
              icon="ui-icon-print" />
          </f:facet>
        </p:toolbar>
        <p:dataTable 
          id="dtList"
          value="#{centroMedicoController.list}"
          var="record"
          paginator="false" 
          selectionMode="single" 
          selection="#{centroMedicoController.selected}" 
          rowKey="#{record.id}">
          <p:ajax 
            event="rowSelect" 
            listener="#{centroMedicoController.onRowSelect}" 
            update=":main" />
          <p:column 
            headerText="#{bundle['centromedico.id']}">
            <h:outputText 
              value="#{record.id}"/>
          </p:column>
          <p:column 
            headerText="#{bundle['centromedico.nit']}">
            <h:outputText 
              value="#{record.nit}"/>
          </p:column>
          <p:column 
            headerText="#{bundle['centromedico.nombre']}">
            <h:outputText 
              value="#{record.nombre}"/>
          </p:column>
          <p:column 
            headerText="#{bundle['centromedico.direccion']}">
            <h:outputText 
              value="#{record.direccion}"/>
          </p:column>
          <p:column 
            headerText="#{bundle['centromedico.municipio']}">
            <h:outputText 
              value="#{record.municipio.nombre}"/>
          </p:column>
          <p:column 
            headerText="#{bundle['centromedico.telefono']}">
            <h:outputText 
              value="#{record.telefono}"/>
          </p:column>
          <p:column 
            headerText="#{bundle['centromedico.contacto']}">
            <h:outputText 
              value="#{record.contacto}"/>
          </p:column>
          <p:column 
            headerText="#{bundle['centromedico.estado']}">
            <h:outputText 
              value="#{record.estado ? bundle['commons.lbl.active'] : bundle['commons.lbl.inactive']}"/>
          </p:column>
        </p:dataTable>
      </h:form>
      <h:form
        id="frmDetail"
        prependId="false"
        rendered="#{centroMedicoController.showDetails}">
        <p:toolbar
          id="tbDetails">
          <f:facet name="left">
            <h:outputText 
              value="#{bundle['title.centromedico']}"
              styleClass="toolbar-title"/>
          </f:facet>
          <f:facet 
            name="right">
            <p:commandButton 
              title="#{bundle['commons.btn.back']}"
              icon="ui-icon-arrowreturn-1-w"
              actionListener="#{centroMedicoController.onBack()}"
              disabled="#{centroMedicoController.editable}"
              update=":main"/>
            <p:commandButton 
              title="#{bundle['commons.btn.edit']}"
              icon="ui-icon-pencil"
              actionListener="#{centroMedicoController.onEdit()}"
              disabled="#{centroMedicoController.editable}"
              update="frmDetail"/>
            <p:commandButton 
              title="#{bundle['commons.btn.remove']}"
              icon="ui-icon-trash"
              actionListener="#{centroMedicoController.onDelete()}"
              immediate="true"
              disabled="#{centroMedicoController.newRecord}"
              update=":main">
              <p:confirm 
                header="#{bundle['commons.cfmdlg.header']}" 
                message="#{bundle['commons.cfmdlg.remove.message']}" 
                icon="ui-icon-alert" />
            </p:commandButton>
          </f:facet>
        </p:toolbar>
        <p:panel>
          <div class="row">
            <p:panel
              id="pnlDetails">
              <p:panelGrid
                columns="2">
                <!-- nit -->
                <p:outputLabel
                  for="nit"
                  value="#{bundle['centromedico.nit']}"/>
                <h:outputText
                  value="#{centroMedicoController.selected.nit}"
                  rendered="#{!centroMedicoController.editable}"/>
                <p:inputText
                  id="nit"
                  value="#{centroMedicoController.selected.nit}"
                  rendered="#{centroMedicoController.editable}"/>
                <!-- nombre -->
                <p:outputLabel
                  for="nombre"
                  value="#{bundle['centromedico.nombre']}"/>
                <h:outputText
                  value="#{centroMedicoController.selected.nombre}"
                  rendered="#{!centroMedicoController.editable}"/>
                <p:inputText
                  id="nombre"
                  value="#{centroMedicoController.selected.nombre}"
                  rendered="#{centroMedicoController.editable}"/>
                <!-- direccion -->
                <p:outputLabel
                  for="direccion"
                  value="#{bundle['centromedico.direccion']}"/>
                <h:outputText
                  value="#{centroMedicoController.selected.direccion}"
                  rendered="#{!centroMedicoController.editable}"/>
                <p:inputText
                  id="direccion"
                  value="#{centroMedicoController.selected.direccion}"
                  rendered="#{centroMedicoController.editable}"/>
                <!-- departamento -->
                <p:outputLabel
                  for="departamento"
                  value="#{bundle['centromedico.departamento']}"
                  rendered="#{centroMedicoController.editable}"/>
                <p:selectOneMenu 
                  id="departamento" 
                  value="#{centroMedicoController.selected.municipio.departamento}" 
                  converter="deptoConverter"
                  rendered="#{centroMedicoController.editable}">
                  <p:ajax 
                    update="municipio" />
                  <f:selectItem 
                    noSelectionOption="true"/>
                  <f:selectItems 
                    value="#{comunController.obtenerDepartamentos()}" 
                    var="record" 
                    itemLabel="#{record.nombre}" 
                    itemValue="#{record}" />
                </p:selectOneMenu>              
                <!-- municipio -->
                <p:outputLabel
                  for="municipio"
                  value="#{bundle['centromedico.municipio']}"/>
                <h:outputText
                  value="#{centroMedicoController.selected.municipio.nombre}"
                  rendered="#{!centroMedicoController.editable}"/>
                <p:selectOneMenu 
                  id="municipio" 
                  value="#{centroMedicoController.selected.municipio}" 
                  converter="municipioConverter"
                  rendered="#{centroMedicoController.editable}">
                  <f:selectItem 
                    noSelectionOption="true"/>
                  <f:selectItems 
                    value="#{comunController.obtenerMunicipios(centroMedicoController.selected.municipio.departamento.id)}" 
                    var="record" 
                    itemLabel="#{record.nombre}" 
                    itemValue="#{record}" />
                </p:selectOneMenu>              
                <!-- telefono -->
                <p:outputLabel
                  for="telefono"
                  value="#{bundle['centromedico.telefono']}"/>
                <h:outputText
                  value="#{centroMedicoController.selected.telefono}"
                  rendered="#{!centroMedicoController.editable}"/>
                <p:inputText
                  id="telefono"
                  value="#{centroMedicoController.selected.telefono}"
                  rendered="#{centroMedicoController.editable}"/>
                <!-- contacto -->
                <p:outputLabel
                  for="contacto"
                  value="#{bundle['centromedico.contacto']}"/>
                <h:outputText
                  value="#{centroMedicoController.selected.contacto}"
                  rendered="#{!centroMedicoController.editable}"/>
                <p:inputText
                  id="contacto"
                  value="#{centroMedicoController.selected.contacto}"
                  rendered="#{centroMedicoController.editable}"/>
                <!-- estado -->
                <p:outputLabel
                  for="estado"
                  value="#{bundle['centromedico.estado']}"/>
                <p:selectBooleanButton 
                  id="estado" 
                  value="#{centroMedicoController.selected.estado}" 
                  onLabel="#{bundle['commons.lbl.active']}" 
                  offLabel="#{bundle['commons.lbl.inactive']}" 
                  style="width:80px" 
                  disabled="#{!centroMedicoController.editable}"/>
              </p:panelGrid>
              <f:facet name="footer">
                <p:commandButton 
                  title="#{bundle['commons.btn.save']}"
                  icon="ui-icon-disk"
                  actionListener="#{centroMedicoController.onSave()}"
                  rendered="#{centroMedicoController.editable}"
                  process="pnlDetails"
                  update=":frmMessage frmDetail"/>
                <p:commandButton 
                  title="#{bundle['commons.btn.cancel']}"
                  icon="ui-icon-circle-close"
                  actionListener="#{centroMedicoController.onCancel()}"
                  immediate="true"
                  rendered="#{centroMedicoController.editable}"
                  update=":main"/>
              </f:facet>
            </p:panel>
          </div>
        </p:panel>
      </h:form>
    </h:panelGroup>
  </ui:define>
</ui:composition>